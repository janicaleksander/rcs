syntax = "proto3";

package types;

option go_package = "github.com/janicaleksander/bcs/Proto";
import  "google/protobuf/timestamp.proto";
// ========================
// DATA MODELS
// ========================

message Role {
  string name = 1;
  uint64 ruleLevel = 2;
}

message Personal {
  string name = 1;
  string surname = 2;
}

message User {
  string id = 1;
  string email = 2;
  string password = 3;
  int32 rule_lvl = 4;
  Personal personal = 5;
}

message Unit {
  string id = 1;
  string name = 2;
  bool isConfigured = 3;
}

message PID {
  string address = 1;
  string id = 2;
}

// ========================
// SYSTEM & STATUS MESSAGES
// ========================

message IsServerRunning {}
message Running {}
message StartApp {}
message PingServer {}
message Disconnect {
  optional PID pid =1;
}
message Ping{}
message Pong{}
// ========================
// AUTHENTICATION & LOGIN
// ========================

message LoginUser {
  PID pid = 1;
  string email = 2;
  string password = 3;
}

message AcceptLogin {
  string info = 1;
  int64 rule_level = 2;
}

message DenyLogin {
  string info = 1;
}

message GetLoggedInUUID {
  PID pid = 1;
}
message LoggedInUUID {
  string id = 1;
}

// ========================
// SERVER CONFIGURATION
// ========================

message NeededServerConfiguration {
  PID serverPID = 1;
}

// ========================
// UNIT OPERATIONS
// ========================

message CreateUnit {
  string name = 1;
  bool isConfigured = 2;
  string userID = 3;
}

message AcceptCreateUnit {}
message DenyCreateUnit {
  string info = 1;
}

message GetAllUnits {}
message AllUnits {
  repeated Unit units = 1;
}

message LoginUnit {
  string id = 2;
}

// ========================
// USER OPERATIONS
// ========================
message CreateUser{
  User user = 1 ;

}
message AcceptCreateUser{
}
message DenyCreateUser{
  string info = 1;
}
message GetAllUsersInUnit {
  string id = 1; //unit uuid
}

message AllUsersInUnit {
  repeated User users = 1;
}

message GetUserAboveLVL {
  int32 lvl = 1;
}

message UsersAboveLVL{
  repeated User users = 1;
}

message IsUserInUnit {
  string id =1;
}
message UserInUnit{
  string unitID = 1;
}
message UserNotInUnit{}
// TODO maybe add some info to all reject type message
message AssignUserToUnit {
  string userID = 1;
  string unitID =2;
}
message SuccessOfAssign{}
message FailureOfAssign{}

message DeleteUserFromUnit{
  string userID = 1;
  string unitID = 2;
}
message SuccessOfDelete{}
message FailureOfDelete{}

// ========================
// MessageService OPERATIONS
// ========================

message CreateConversation{
  string id = 1;
  string name = 2 ;
}

message SuccessOfCreateConversation{}
message FailureOfCreateConversation{}

message AddUserToConversation{
  string userID = 1;
  string conversationID = 2;
  optional string lastSeenMessageID =3; // i have to think about this
}
message SuccessOfAddUserToConversation{}
message FailureOfAddUserToConversation{}

message Message{
  string id = 1;
  string senderID = 2;
  string conversationID =3;
  string content = 4;
  google.protobuf.Timestamp sent_at = 5;

}

message LoadConversation{}



